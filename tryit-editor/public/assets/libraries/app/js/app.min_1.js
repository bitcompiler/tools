/*!
# Author: BitCompiler
# Copyright @ bitCompiler.com. All Rights Reserved
*/
function extractHostname(t){var a;return a=t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0],a=a.split(":")[0],a=a.split("?")[0]}function extractRootDomain(t){var a=extractHostname(t),e=a.split("."),r=e.length;return r>2&&(a=e[r-2]+"."+e[r-1]),a}function toggleCDNView(){$(".cdn-wrapper").is(":hidden")?($(".cdn-wrapper").slideDown(function(){moveDragbar()}),$(".cdn-wrapper").find(".cdn-library-search").focus()):hideCDNView()}function hideCDNView(){$(".cdn-wrapper").slideUp(function(){moveDragbar()})}function cdnLibrarySearch(){if($(".cdn-wrapper").find(".cdn-library-search").val()){$("#cdn-pagination").twbsPagination("destroy");var t=$('<img class="img-responsive center-block"/>').attr("src","public/assets/images/round-loader.gif");t.attr("alt","Loading..."),$(".cdn-wrapper").find(".list-group").html(t);var a="https://api.cdnjs.com/libraries?search="+$(".cdn-wrapper").find(".cdn-library-search").val();moveDragbar(),$(".cdn-wrapper .panel-body").BitCompiler().hideInlineMessageBox(!0),$.ajax({type:"GET",url:a,success:function(t,a,e){t.total||$(".cdn-wrapper .panel-body").BitCompiler().showInlineMessageBox({messageBoxType:"error",message:"There is no data to be displayed"});var r=Math.ceil(t.total/10);10>=t.total?populateCDNSearchData(1,10,t):($("#cdn-pagination").twbsPagination({totalPages:r,visiblePages:10,onPageClick:function(a,e){populateCDNSearchData(e,10,t)}}),moveDragbar())},error:function(t,a,e){bitcompiler.doDebug("error","app.js",null,"cdnLibrarySearch()","cdnjs request Failed! (Code: "+t.status+", Status: "+a+", Error: "+e+")",null)},complete:function(t,a,e){}})}}function cdnLibrarySelect(t){var a=$(t).data("cdn-library-id"),e=$(t).closest(".cdn-wrapper").find("#"+a).find(".well");if(0!==e.length)return e.remove(),void $(t).text("More");$(t).text("Less");var r=$(t).closest("h4.list-group-item-heading").find(".cdn-library-name").text(),i=$(t).closest(".list-group-item").find(".cdn-library-filename").text().split(r)[0];$(t).closest(".cdn-wrapper").find("#"+a).append('<div class="well"/>');var o=$('<img class="img-responsive center-block"/>').attr("src","public/assets/images/round-loader.gif");o.attr("alt","Loading..."),$(t).closest(".cdn-wrapper").find("#"+a).find(".well").html(o);var n="https://api.cdnjs.com/libraries/"+r;moveDragbar(),$.ajax({type:"GET",url:n,success:function(e,o,n){$(t).closest(".cdn-wrapper").find("#"+a).find(".well").html($(".cdn-certain-library-select-template").html());var l=$(t).closest(".cdn-wrapper").find("#"+a).find(".well").find(".versions");l.data("cdn-provider-baseurl",i),l.data("cdn-library-name",r),l.data("cdn-response",e),$(t).closest(".cdn-wrapper").find("#"+a).find(".well").find(".select-cdn-providers").html("<option>"+extractRootDomain(i)+"</option>");for(var d=0;d<e.assets.length;d++)l.append("<option>"+e.assets[d].version+"</option>");l.trigger("change"),moveDragbar()},error:function(t,a,e){bitcompiler.doDebug("error","app.js",null,"cdnLibrarySelect()","Request Failed! (Code: "+t.status+", Status: "+a+", Error: "+e+")",null)},complete:function(t,a,e){}})}function populateCDNCertainLibraryFilenames(t,a,e,r){for(var i=$(".cdn-wrapper").find(".cdn-certain-library-filenames").html(""),o=t*a-a,n=o;n<(e.length<o+a?e.length:o+a);n++)i.append('<p style=\'font-size:14px;font-weight:normal;color:#666666;\'><button class="btn btn-danger btn-xs LinkCopyButton" data-clipboard-target="#CDNCertainLibraryFilename-'+n+'">Copy</button> <span class="cdn-library-filename" id="CDNCertainLibraryFilename-'+n+'">'+r.data("cdn-provider-baseurl")+r.data("cdn-library-name")+"/"+r.val()+"/"+e[n]+"</span></p>")}function populateCDNSearchData(t,a,e){$(".cdn-wrapper").find(".list-group").html("");for(var r=t*a-a,i=r;i<(e.total<r+a?e.total:r+a);i++){var o='<div class="list-group-item ">';o+='<h4 class="list-group-item-heading"><button class="btn btn-success btn-xs" onclick="cdnLibrarySelect(this)" data-cdn-library-id="cdn-library-name-'+i+'">More</button> <span class="cdn-library-name" id="cdn-library-name-'+i+'">'+e.results[i].name+"</h4>",o+='<p class="list-group-item-text"><button class="btn btn-danger btn-xs LinkCopyButton" data-clipboard-target="#cdn-library-filename-'+i+'">Copy</button> <span class="cdn-library-filename" id="cdn-library-filename-'+i+'">'+e.results[i].latest+"</span></p></div>",$(".cdn-wrapper").find(".list-group").append(o)}}function windowOnloadScripts(){try{htmlEditorData.userInput.decrypted.filename=(new bitcompiler.Common).getURLParameterValue("filename");var t=(new bitcompiler.Common).getURLParameterValue("id");if(htmlEditorData.userInput.decrypted.filename){if(htmlEditorData.storage.isSupport()){var a;t?(new bitcompiler.jquery.Http).sendData($container,{requestData:{ajaxSettings:{url:"https://tutorials.bitcompiler.com/feeds/posts/default/"+t,method:"GET",dataType:"json",data:"alt=json"},callback:{success:function(t,e,r){a=a.entry.content.$t},error:function(t,a,e){(new bitcompiler.jquery.ui.MessageBox).show({type:"error",modal:!0,title:"Error",body:e})}}}}):a=getEditorDataFromLocalStorage(htmlEditorData.userInput.decrypted.filename),a?$("#textarea-code").val(a):$("#textarea-code").val(""),$(".run").trigger("click")}}else manageSaveIndicator()}catch(t){bitcompiler.doDebug("error","gui.js",null,"windowOnloadScripts()","Error occured in check input data availability",t.message)}$(window).resize(function(){onResizeEvent()}),$(".textarea-wrapper-container").show(),setSizeData(),changeOrientation(getOrientation($(".change-orientation"))),document.getElementById("resize-detector").addEventListener("onresize",function(t){if(!$(t.target).data("timer-id")){createDragbar();var a=setTimeout(function(){$(t.target).data("timer-id",null),createDragbar()},10);$(t.target).data("timer-id",a)}}),htmlEditorData.editor=CodeMirror.fromTextArea(document.getElementById("textarea-code"),{mode:"text/html",htmlMode:!0,lineWrapping:!0,smartIndent:!1,addModeClass:!0,lineNumbers:!0}),setFocus(),htmlEditorData.editor.setSize("100%","100%");var e=!1;if(htmlEditorData.editor.on("keypress",function(t,a){e=!0}),htmlEditorData.editor.on("change",function(t,a){manageSaveIndicator()}),$(".toggle-fullscreen").click(function(t){t.preventDefault();var a=$(this);a.children("i").hasClass("glyphicon-resize-full")?a.children("i").addClass("glyphicon-resize-small").removeClass("glyphicon-resize-full"):a.children("i").hasClass("glyphicon-resize-small")&&a.children("i").addClass("glyphicon-resize-full").removeClass("glyphicon-resize-small"),$(this).closest(".bitcompiler-editor-container").toggleClass("fullscreen"),$("body").toggleClass("hide-main-scrollbar"),moveDragbar()}),$(".toggle-fullscreen").trigger("click"),window.onbeforeunload=function(t){var a=htmlEditorData.editor?htmlEditorData.editor.getValue():document.getElementById("textarea-code").value;if(!htmlEditorData.userInput.decrypted.filename&&a)return confirm("Confirm Refresh")},$(document).bind("keydown",function(t){if(!$(t.target).is("input")){if(t.ctrlKey&&83===t.which)return t.preventDefault(),save(),!1;if(t.ctrlKey&&86===t.which)manageSaveIndicator(),setTimeout(function(){autoFormat()},10);else{if(t.ctrlKey&&72===t.which)return t.preventDefault(),toggleHistoryView(),!1;if(t.ctrlKey&&68===t.which)return t.preventDefault(),newFile(!1),!1;if(t.ctrlKey&&69===t.which)return t.preventDefault(),newFile(!0),!1;8===t.which&&manageSaveIndicator()}}}),$(".cdn-wrapper").find(".cdn-library-search").keyup(function(t){13===t.keyCode&&cdnLibrarySearch()}),window.addEventListener)try{document.getElementById("dragbar").addEventListener("mousedown",function(t){dragStart(t)}),document.getElementById("dragbar").addEventListener("touchstart",function(t){dragStart(t)}),window.addEventListener("mousemove",function(t){dragMove(t)}),window.addEventListener("touchmove",function(t){dragMove(t)}),window.addEventListener("mouseup",dragEnd),window.addEventListener("touchend",dragEnd)}catch(t){bitcompiler.doDebug("error","gui.js",null,"windowOnloadScripts()","Couldn't add dragbar events",t.message)}manageSaveIndicator()}function newFile(t){try{if(t)htmlEditorData.editor.setValue("");else{var a=$(".default-template").val();a=CryptoJS.AES.decrypt(a,htmlEditorData.cryptKey,256).toString(CryptoJS.enc.Utf8),htmlEditorData.editor.setValue(a)}var e=window.location.href.substr(0,window.location.href.length-window.location.search.length);history.pushState(null,"",e),htmlEditorData.userInput.decrypted.filename=null,$("#inline-frame-wrapper").html(""),manageSaveIndicator(),setFocus()}catch(t){bitcompiler.doDebug("error","gui.js",null,"newFile()","Couldn't create new file",t.message)}}function downloadAsHTMLFile(){try{var t=htmlEditorData.editor?htmlEditorData.editor.getValue():document.getElementById("textarea-code").value;if(t){var a=(new bitcompiler.Common).getURLParameterValue("filename");if(!a){if(null===(a=prompt("Please enter file name (optional)","")))return;(a=a.trim())?htmlEditorData.userInput.decrypted.filename=a.replace(/[^a-z0-9]+/gi,"-").replace(/^-*|-*$/g,"").toLowerCase():a=(new Date).getTime().toString()}var e={fileName:a+".html",fileContent:t,type:"text/html"};(new bitcompiler.Common).downloadFile(e)}else alert("Nothing to download!!!");return!1}catch(t){bitcompiler.doDebug("error","gui.js",null,"downloadAsHTMLFile()","Couldn't download the file",t.message)}}function save(t){try{var a=htmlEditorData.editor?htmlEditorData.editor.getValue():document.getElementById("textarea-code").value,e=(new bitcompiler.Common).getURLParameterValue("filename");if(e&&!t)htmlEditorData.userInput.decrypted.filename=e,setEditorDataToLocalStorage(htmlEditorData.userInput.decrypted.filename,a);else if(null!==(e=prompt("Please enter file name (optional)",""))){if(e=e.trim()){if(htmlEditorData.userInput.decrypted.filename=e.replace(/[^a-z0-9]+/gi,"-").replace(/^-*|-*$/g,"").toLowerCase(),null!==getEditorDataFromLocalStorage(htmlEditorData.userInput.decrypted.filename)){var r="File name '"+e+"' already exists.\nDo you want to replace it?";if(!1===confirm(r))return void save()}}else{var i=new Date;htmlEditorData.userInput.decrypted.filename=i.getTime().toString()}(new bitcompiler.Common).setURLParameter("filename",htmlEditorData.userInput.decrypted.filename),setEditorDataToLocalStorage(htmlEditorData.userInput.decrypted.filename,a)}historyManager()}catch(t){bitcompiler.doDebug("error","gui.js",null,"save()","Couldn't save the script",t.message)}}function run(){try{$("#inline-frame-wrapper").html(""),htmlEditorData.editor&&htmlEditorData.editor.save();var t=htmlEditorData.editor?htmlEditorData.editor.getValue():document.getElementById("textarea-code").value;if(!t)return;var a=document.createElement("iframe");a.setAttribute("frameborder","0"),a.setAttribute("id","inline-frame-output"),a.setAttribute("name","inline-frame-output"),document.getElementById("inline-frame-wrapper").innerHTML="",document.getElementById("inline-frame-wrapper").appendChild(a);var e=a.contentWindow?a.contentWindow:a.contentDocument.document?a.contentDocument.document:a.contentDocument;e.document.open(),e.document.write(t),e.document.close(),e.document.body&&!e.document.body.isContentEditable&&(e.document.body.contentEditable=!0,e.document.body.contentEditable=!1),setFocus()}catch(t){bitcompiler.doDebug("error","gui.js",null,"run()","Couldn't run the script",t.message)}}function historyDataToBootstrapTable(t,a,e,r,i,o){var n={jsonData:a?a.content:a,hideFields:r||[],serialNo:{enabled:!0,slno:1},additionalColumnData:{values:e||[]},callback:{error:function(a){t.html(""),t.parent().BitCompiler().showInlineMessageBox({messageBoxType:"error",message:a})}}};return"function"==typeof i&&(n.callback.beforeRowCreation=function(t,a,e){i(t,a,e)}),"function"==typeof o&&(n.callback.afterRowCreation=function(t,a){o(t,a)}),t.BitCompiler().jsonToBootstrapTable(n),n}function historyPagination(t,a,e){var r={totalPages:t?t.totalPages:0,visiblePages:t?t.visiblePages:0,forceCreate:!!e,ajaxSettings:null,callback:{beforeSendRequest:function(t,a){var e=prepareDataForHistoryView(t=parseInt(t));$container.find(".history-wrapper").find("table.table").BitCompiler().reloadTable({reload:{page:t,pageSize:e.pageSize,data:e.content},tableOptions:htmlEditorData.history.tableOptions})}}};return $container.find(".history-pagination").BitCompiler().pagination(r),r}function loadHistoryDataToView(){htmlEditorData.localStorage.isDataUpdated&&(htmlEditorData.localStorage.isDataUpdated=!1,htmlEditorData.localStorage.wholeData=htmlEditorData.storage.getAll(htmlEditorData.localStorage.keyPrefix))}function prepareDataForHistoryView(t){var a={};if(a.visiblePages=10,a.pageSize=1,a.all=htmlEditorData.localStorage.wholeData,a.currentPageNo=t,a.totalPages=Math.ceil(a.all.length/a.pageSize),a.content=[],t<0||isNaN(t)||0===htmlEditorData.localStorage.wholeData.length)return a;for(var e=t?t*a.pageSize-a.pageSize:0,r=e;r<e+a.pageSize&&(a.all[r]||r===e);r++){if(!a.all[r])return prepareDataForHistoryView(t-1);var i=a.all[r].keyValue;a.content.push((new bitcompiler.Validation).isJSON(CryptoJS.AES.decrypt(i,htmlEditorData.cryptKey,256).toString(CryptoJS.enc.Utf8)))}return a}function historyManager(){if(!$(".history-wrapper").is(":hidden")){$container.find(".history-wrapper").find("table.table").parent().BitCompiler().hideInlineMessageBox(!0),loadHistoryDataToView(),0===htmlEditorData.localStorage.wholeData.length?$container.find(".footer-bar").hide():$container.find(".footer-bar").show();var t=prepareDataForHistoryView(1);htmlEditorData.history.tableOptions=historyDataToBootstrapTable($container.find(".history-wrapper").find("table.table"),t,null,["fileData"],function(t,a,e){a.fileName=a.fileName.length>30?a.fileName.substr(0,30)+"...":a.fileName,a.action='<span data-toggle="tooltip" title=\'Open this file in editor\' onclick=\'openHistory(this)\'"><i class="fa fa-folder-open-o" aria-hidden="true"></i></span> | <span data-toggle="tooltip" title=\'Remove this file from history\' onclick=\'clearHistory(this)\'"><i class="fa fa-trash-o" aria-hidden="true"></i></span>',e(a)}),$('[data-toggle="tooltip"]').tooltip(),htmlEditorData.history.paginationOptions=historyPagination(t,htmlEditorData.history.tableOptions,!0)}}function toggleHistoryView(){$(".history-wrapper").is(":hidden")?($(".history-wrapper .table-responsive").html("<img class='center-block' src='public/assets/images/round-loader.gif'/>"),$(".history-wrapper").slideDown(function(){$(".history-wrapper .table-responsive").html('<table class="table table-bordered table-striped"></table>'),historyManager(),moveDragbar()})):hideHistoryView()}function hideHistoryView(){$(".history-wrapper").slideUp(function(){moveDragbar()})}function openHistory(t){var a=JSON.parse($(t).closest("tr").find("td.data-json").find("textarea.data").val());(new bitcompiler.Common).setURLParameter("filename",a.fileName),htmlEditorData.userInput.decrypted.filename=a.fileName,htmlEditorData.editor.setValue(a.fileData),$(".run").trigger("click")}function clearHistory(t){try{var a=null!==t?"Are you sure you want to delete this file?":"Are you sure you want to remove all files?";if(!0===confirm(a)){var e=null;if(t&&(e=(i=JSON.parse($(t).closest("tr").find("td.data-json").find("textarea.data").val())).fileName),removeEditorDataFromLocalStorage(e),loadHistoryDataToView(),htmlEditorData.localStorage.wholeData.length){var r=$container.find(".history-pagination").BitCompiler().pagination("getCurrentPageNumber"),i=prepareDataForHistoryView(r);$container.find(".history-wrapper").find("table.table").BitCompiler().reloadTable({reload:{page:i.currentPageNo,pageSize:i.pageSize,data:i.content},tableOptions:htmlEditorData.history.tableOptions}),htmlEditorData.history.paginationOptions.totalPages=i.totalPages,htmlEditorData.history.paginationOptions.currentPageNo=r,htmlEditorData.history.paginationOptions.initiateStartPageClick=0===htmlEditorData.localStorage.wholeData.length,$container.find(".history-pagination").BitCompiler().pagination(htmlEditorData.history.paginationOptions)}else historyManager();if(e&&htmlEditorData.userInput.decrypted.filename&&htmlEditorData.userInput.decrypted.filename.toString()!==e.toString())return;newFile(!0)}}catch(t){bitcompiler.doDebug("error","gui.js",null,"clearHistory()","Couldn't clear editor data from localstorage",t.message)}}function setSizeData(){htmlEditorData.height.menubar=$(".menubar").innerHeight(),htmlEditorData.height.wrapper=$(window).innerHeight()-htmlEditorData.height.menubar}function onResizeEvent(){htmlEditorData.event="resize",setSizeData(),changeOrientation(getOrientation($(".change-orientation")))}function getOrientation(t){return!htmlEditorData.orientationButton.clickedStatus&&$(window).innerWidth()<htmlEditorData.window.maxWidth?htmlEditorData.orientation="H":!htmlEditorData.orientationButton.clickedStatus&&$(window).innerWidth()>=htmlEditorData.window.maxWidth?htmlEditorData.orientation="V":htmlEditorData.orientationButton.clickedStatus&&"click"===htmlEditorData.event&&(htmlEditorData.orientation="V"===htmlEditorData.orientation?"H":"V"),$(t).data("orientation",htmlEditorData.orientation),htmlEditorData}function onClickChangeOrientation(t){htmlEditorData.event="click",htmlEditorData.orientationButton.clickedStatus=!0,htmlEditorData=getOrientation(t),changeOrientation(),setSizeData()}function changeOrientation(){"H"===htmlEditorData.orientation?($(".change-orientation").html('<i class="fa fa-undo" aria-hidden="true"></i>'),$(".textarea-wrapper-col").css({"margin-bottom":"9px","padding-right":"15px"}),$(".inline-frame-col").css({"padding-left":"15px"}),htmlEditorData.orientationButton.clickedStatus&&$(".textarea-wrapper-col,.inline-frame-col").removeClass("col-md-6 col-sm-6 col-xs-6").addClass("col-md-12 col-sm-12 col-xs-12"),$(".textarea-wrapper-col,.textarea-code,.textarea-wrapper,#inline-frame-wrapper").height((htmlEditorData.height.wrapper-20)/2),setEditorSizeByXYPosition(null,$(".textarea-wrapper-container").innerHeight()/2)):"V"===htmlEditorData.orientation&&($(".change-orientation").html('<i class="fa fa-repeat" aria-hidden="true"></i>'),$(".textarea-wrapper-col").css({"margin-bottom":"0px","padding-right":"5px"}),$(".inline-frame-col").css({"padding-left":"5px"}),htmlEditorData.orientationButton.clickedStatus&&$(".textarea-wrapper-col,.inline-frame-col").removeClass("col-md-12 col-sm-12 col-xs-12").addClass("col-md-6 col-sm-6 col-xs-6"),setEditorSizeByXYPosition($(window).innerWidth()/2,null)),setTimeout(function(){createDragbar()},100)}function share(){$(".share-wrapper").is(":hidden")?$(".share-wrapper").slideDown(function(){moveDragbar()}):hideShareView()}function hideShareView(){$(".share-wrapper").slideUp(function(){moveDragbar()})}function dragStart(t){$("#dragbar").data("is-dragging",!0),htmlEditorData.draggingData.previousMousePosition.x=t.pageX,htmlEditorData.draggingData.previousMousePosition.y=t.pageY}function dragMove(t){!$("#dragbar").data("is-dragging")||htmlEditorData.draggingData.previousMousePosition.x===t.pageX&&htmlEditorData.draggingData.previousMousePosition.y===t.pageY||($("#dragging-overlay").show(),setEditorSizeByXYPosition(t.pageX,t.pageY-$(".textarea-wrapper-container").offset().top),moveDragbar())}function dragEnd(t){$("#dragbar").data("is-dragging")&&($("#dragbar").data("is-dragging",!1),$("#dragging-overlay").hide())}function createDragbar(){try{setDragColumnDimensions(),$("#dragbar").css({width:"0px",height:"0px",top:"0",left:"0"}),"H"===htmlEditorData.orientation?(htmlEditorData.draggingData.dragbar.height=12,htmlEditorData.draggingData.dragbar.width=htmlEditorData.draggingData.column.width+2,htmlEditorData.draggingData.dragbar.left=htmlEditorData.draggingData.column.left,htmlEditorData.draggingData.dragbar.top=htmlEditorData.draggingData.column.top+htmlEditorData.draggingData.column.height,$("#dragbar").offset({top:htmlEditorData.draggingData.dragbar.top,left:htmlEditorData.draggingData.dragbar.left}),$("#dragbar").css({width:htmlEditorData.draggingData.dragbar.width+"px",height:htmlEditorData.draggingData.dragbar.height+"px",cursor:"row-resize"})):"V"===htmlEditorData.orientation&&(htmlEditorData.draggingData.dragbar.width=12,htmlEditorData.draggingData.dragbar.height=htmlEditorData.draggingData.column.height+2,htmlEditorData.draggingData.dragbar.left=htmlEditorData.draggingData.column.left+htmlEditorData.draggingData.column.width,htmlEditorData.draggingData.dragbar.top=htmlEditorData.draggingData.column.top,$("#dragbar").css({width:htmlEditorData.draggingData.dragbar.width+"px",height:htmlEditorData.draggingData.dragbar.height+"px",cursor:"col-resize"}),$("#dragbar").offset({top:htmlEditorData.draggingData.dragbar.top,left:htmlEditorData.draggingData.dragbar.left})),showOutputResolutionInfo(),$("#dragbar").data("is-dragging",!1),$("#dragbar").show()}catch(t){bitcompiler.doDebug("error","gui.js",null,"createDragbar()","Couldn't create dragbar",t.message)}}function moveDragbar(){try{setDragColumnDimensions(),"H"===htmlEditorData.orientation?(htmlEditorData.draggingData.column.height=$(".textarea-wrapper").innerHeight(),htmlEditorData.draggingData.column.top=$(".textarea-wrapper").offset().top,htmlEditorData.draggingData.dragbar.top=htmlEditorData.draggingData.column.top+htmlEditorData.draggingData.column.height,$("#dragbar").offset({top:htmlEditorData.draggingData.dragbar.top})):"V"===htmlEditorData.orientation&&(htmlEditorData.draggingData.dragbar.left=htmlEditorData.draggingData.column.left+htmlEditorData.draggingData.column.width,$("#dragbar").offset({top:htmlEditorData.draggingData.column.top,left:htmlEditorData.draggingData.dragbar.left}))}catch(t){bitcompiler.doDebug("error","gui.js",null,"moveDragbar()","Couldn't move dragbar",t.message)}}function setEditorSizeByXYPosition(t,a){try{if($(".textarea-wrapper-container,.textarea-wrapper-row").css({height:htmlEditorData.height.wrapper-10+"px"}),"H"===htmlEditorData.orientation){var e=a/$(".textarea-wrapper-container").innerHeight()*100,r=100-e,i=$(".textarea-wrapper-container").innerHeight()*(e/100)-4.5,o=$(".textarea-wrapper-container").innerHeight()*(r/100)-4.5;if(i<50||o<50)return;$(".textarea-wrapper-col").css({width:"100%",height:i+"px"}),$(".textarea-wrapper,.textarea-code").css({width:"100%",height:"100%"}),$(".inline-frame-col").css({width:"100%",height:o+"px"}),$("#inline-frame-wrapper,#inline-frame-output").css({width:"100%",height:"100%"})}else if("V"===htmlEditorData.orientation){var n=t/$(window).innerWidth()*100,l=100-n,d=$(window).innerWidth()*(n/100)-15,s=$(window).innerWidth()*(l/100)-15;if(d<50||s<50)return;$(".textarea-wrapper-col").css({width:n+"%",height:"100%"}),$(".textarea-wrapper,.textarea-code").css({width:"100%",height:"100%"}),$(".inline-frame-col").css({width:l+"%",height:"100%"}),$("#inline-frame-wrapper,#inline-frame-output").css({width:"100%",height:"100%"})}showOutputResolutionInfo()}catch(t){bitcompiler.doDebug("error","gui.js",null,"setEditorSizeByXYPosition()","Couldn't set editor X,Y positions",t.message)}}function showOutputResolutionInfo(){$(".output-resolution").html("<b>"+Math.ceil($("#inline-frame-wrapper").innerWidth())+"</b> x <b>"+Math.ceil($("#inline-frame-wrapper").innerHeight())+"</b>")}function setDragColumnDimensions(){$("#dragbar").is(":visible")&&($("#dragbar").data("is-dragbar-hidden",!0),$("#dragbar").hide()),htmlEditorData.draggingData.column.width=$(".textarea-wrapper").innerWidth(),htmlEditorData.draggingData.column.height=$(".textarea-wrapper").innerHeight(),htmlEditorData.draggingData.column.top=$(".textarea-wrapper").offset().top,htmlEditorData.draggingData.column.left=$(".textarea-wrapper").offset().left,$("#dragbar").data("is-dragbar-hidden")&&($("#dragbar").show(),$("#dragbar").removeAttr("is-dragbar-hidden"))}function manageSaveIndicator(){var t=(new bitcompiler.Common).getURLParameterValue("filename"),a=htmlEditorData.editor?htmlEditorData.editor.getValue():document.getElementById("textarea-code").value;t?getEditorDataFromLocalStorage(t)!==a?($(".save-indicator").html('<i class="fa fa-asterisk" aria-hidden="true"></i>').show(),$container.find(".dropdown-menu a[class='save']").BitCompiler().setDisabled(!1)):($(".save-indicator").html("").hide(),$container.find(".dropdown-menu a[class='save']").BitCompiler().setDisabled(!0)):a.length?($(".save-indicator").html('<i class="fa fa-asterisk" aria-hidden="true"></i>').show(),$container.find(".dropdown-menu a[class='save']").BitCompiler().setDisabled(!1)):($(".save-indicator").html("").hide(),$container.find(".dropdown-menu a[class='save']").BitCompiler().setDisabled(!0))}function setFocus(){htmlEditorData.editor?(htmlEditorData.editor.focus(),htmlEditorData.editor.setCursor(htmlEditorData.editor.lineCount(),0)):$("#textarea-code").focus()}function autoFormat(){var t=htmlEditorData.editor.lineCount();htmlEditorData.editor.autoFormatRange({line:0,ch:0},{line:t-1,ch:htmlEditorData.editor.getLine(t-1).length});var a={from:htmlEditorData.editor.getCursor(!0),to:htmlEditorData.editor.getCursor(!1)};htmlEditorData.editor.commentRange(!1,a.from,a.to)}function setEditorDataToLocalStorage(t,a){try{if(!t)return;$(".save-indicator").html("").hide(),$(".save-indicator").text("Saving...").show(),htmlEditorData.storage.isAvailable()||!0===confirm("Browser storage is full. Are you sure you want to clear history?")&&removeEditorDataFromLocalStorage(null),htmlEditorData.localStorage.keyName=htmlEditorData.localStorage.keyPrefix?htmlEditorData.localStorage.keyPrefix+"-"+t:t,htmlEditorData.localStorage.editor.fileName=t,htmlEditorData.localStorage.editor.fileData=a;var e=htmlEditorData.storage.get(htmlEditorData.localStorage.keyName);if(e){try{e=(new bitcompiler.Validation).isJSON(CryptoJS.AES.decrypt(e,htmlEditorData.cryptKey,256).toString(CryptoJS.enc.Utf8))}catch(t){bitcompiler.doDebug("error","app.js",null,"setEditorDataToLocalStorage()","Couldn't decrypt data",t.message),e=!1}htmlEditorData.localStorage.editor.createTime=e?e.createTime:(new Date).getTime(),htmlEditorData.localStorage.editor.lastUpdateTime=(new Date).getTime()}else htmlEditorData.localStorage.editor.createTime=(new Date).getTime(),htmlEditorData.localStorage.editor.lastUpdateTime=null;htmlEditorData.localStorage.isDataUpdated=!0,htmlEditorData.localStorage.keyValue=CryptoJS.AES.encrypt(JSON.stringify(htmlEditorData.localStorage.editor),htmlEditorData.cryptKey,256),htmlEditorData.storage.set(htmlEditorData.localStorage.keyName,htmlEditorData.localStorage.keyValue),null!==htmlEditorData.saveIndicator.timer.id&&clearTimeout(htmlEditorData.saveIndicator.timer.id),htmlEditorData.saveIndicator.timer.id=setTimeout(function(){$(".save-indicator").text("Saved").fadeOut(500,function(){manageSaveIndicator()})},htmlEditorData.saveIndicator.timer.timeout)}catch(t){bitcompiler.doDebug("error","app.js",null,"setEditorDataToLocalStorage()","Couldn't set data to localstorage",t.message)}}function getEditorDataFromLocalStorage(t){try{if(!t)return null;var a=null!==htmlEditorData.localStorage.keyPrefix?htmlEditorData.localStorage.keyPrefix+"-"+t:t,e=htmlEditorData.storage.get(a);if(!e)return null;if(!htmlEditorData.localStorage.keyPrefix)return e;var r=null;try{r=(new bitcompiler.Validation).isJSON(CryptoJS.AES.decrypt(e,htmlEditorData.cryptKey,256).toString(CryptoJS.enc.Utf8))}catch(t){bitcompiler.doDebug("error","app.js",null,"getEditorDataFromLocalStorage()","Couldn't decrypt data",t.message),r=!1}return r?r.fileData:r}catch(t){return bitcompiler.doDebug("error","app.js",null,"getEditorDataFromLocalStorage()","Couldn't get editor data from storage",t.message),null}}function removeEditorDataFromLocalStorage(t){try{if(t)t=htmlEditorData.localStorage.keyPrefix?htmlEditorData.localStorage.keyPrefix+"-"+t:t,htmlEditorData.storage.remove(t);else if(htmlEditorData.localStorage.keyPrefix)for(var a=0;a<htmlEditorData.localStorage.wholeData.length;a++)-1!==(t=htmlEditorData.localStorage.wholeData[a].keyName).search(new RegExp(htmlEditorData.localStorage.keyPrefix,"gi"))&&htmlEditorData.storage.remove(t);else null===t&&htmlEditorData.storage.removeAll();htmlEditorData.localStorage.isDataUpdated=!0}catch(t){bitcompiler.doDebug("error","app.js",null,"removeEditorDataFromLocalStorage()","Couldn't romove editor data from localstorage",t.message)}}$(document).ready(function(){windowOnloadScripts(),$('[data-toggle="tooltip"]').tooltip({placement:"auto"})}),$(document).on("change","select.versions",function(){var t=$(this),a=$(this).data("cdn-response");$(this).closest(".well").find("#cdn-certain-library-filenames-pagination").twbsPagination("destroy");for(var e=0;e<a.assets.length;e++)if(a.assets[e].version===$(this).val()){var r=Math.ceil(a.assets[e].files.length/20);if(20>=a.assets[e].files.length)return void populateCDNCertainLibraryFilenames(1,20,a.assets[e].files,t);$(this).closest(".well").find("#cdn-certain-library-filenames-pagination").twbsPagination({totalPages:r,visiblePages:10,onPageClick:function(r,i){populateCDNCertainLibraryFilenames(i,20,a.assets[e].files,t)}});break}});try{var clipboard=new Clipboard(".cdn-wrapper .btn",{text:function(t){var a=t.getAttribute("data-clipboard-target");if(a){var e=$(a).text();return-1===e.indexOf(".js")?-1!==e.indexOf(".css")?'<link rel="stylesheet" href="'+e+'"/>':e:'<script src="'+e+'"><\/script>'}}}),previousCopy=null;clipboard.on("success",function(t){previousCopy&&previousCopy.attr("data-clipboard-target")!==$(t.trigger).attr("data-clipboard-target")&&(previousCopy.removeAttr("title"),previousCopy.tooltip("destroy"),previousCopy=null),previousCopy||($(t.trigger).attr("title","Copied"),$(t.trigger).tooltip("show"),previousCopy=$(t.trigger));var a=t.trigger.getAttribute("data-clipboard-target");if(a){var e=$(a)[0];(new bitcompiler.Common).selectText(e)}}),clipboard.on("error",function(t){t.clearSelection()})}catch(t){bitcompiler.doDebug("error","app.js",null,"populateCDNSearchData()","Couldn't populate CDN search data",t.message)}var $container=$(".bitcompiler-editor-container"),htmlEditorData={editor:null,cryptKey:"tools.bitcompiler.com",userInput:{decrypted:{filename:null,data:null},encrypted:{filename:null,data:null}},orientation:null,event:"onload",window:{maxWidth:992},height:{menubar:null,wrapper:null},orientationButton:{clickedStatus:!1,data:null},saveIndicator:{timer:{id:null,timeout:300}},storage:new bitcompiler.storage.WebStorage("localStorage"),localStorage:{keyName:null,keyValue:null,keyPrefix:"tools.bitcompiler.com-editor",wholeData:null,isDataUpdated:!0,editor:{fileName:null,createTime:null,lastUpdateTime:null,fileData:null}},draggingData:{column:{left:null,top:null,width:null,height:null},dragbar:{left:null,top:null,width:null,height:null},previousMousePosition:{x:null,y:null}},history:{tableOptions:null,paginationOptions:null}};